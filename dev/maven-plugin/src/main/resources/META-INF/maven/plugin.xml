<!-- TODO - this should be at least in part generated -->

<!-- This was copied from https://maven.apache.org/ref/3.3.9/maven-plugin-api/plugin.html.
  Unused configuration items have simply been commented out in case they need to be used
  in future -->
<plugin>
    <name>Lagom Maven Plugin</name>
    <description>Provides maven support for Lagom Framework</description>
    <groupId>com.lightbend.lagom</groupId>
    <artifactId>lagom-maven-plugin</artifactId>
    <version>1.1.0-SNAPSHOT</version>
    <goalPrefix>lagom</goalPrefix>
    <!-- <isolatedRealm/>
    <inheritedByDefault/> -->

    <mojos>
        <mojo>
            <goal>configure</goal>
            <description>Configures a Lagom project.</description>
            <implementation>com.lightbend.lagom.maven.ConfigureMojo</implementation>
            <!-- <language/>
            <phase/>
            <executePhase/>
            <executeGoal/>
            <executeLifecycle/>
            <requiresDependencyResolution/>
            <requiresDependencyCollection/>
            -->
            <!-- It doesn't make sense to run runAll as part of the lifecycle, since it blocks -->
            <requiresDirectInvocation>true</requiresDirectInvocation>
            <!--
            <requiresProject/>
            <requiresReports/>
            <requiresOnline/>
            <aggregator/>
            <inheritedByDefault/>
            <threadSafe/>
            -->
            <!-- instantiationStrategy is a required element -->
            <instantiationStrategy>per-lookup</instantiationStrategy>
            <!--
            <executionStrategy/>
            <since/>
            <deprecated/>
            <configurator/>
            <composer/>
            -->
            <parameters>
                <parameter>
                    <name>lagomService</name>
                    <type>boolean</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>Whether this project is a Lagom service or not</description>
                </parameter>
            </parameters>
            <configuration>
                <lagomService implementation="boolean" default-value="false"/>
            </configuration>

            <!--
            <requirements>
                <requirement>
                    <role/>
                    <role-hint/>
                    <field-name/>
                </requirement>
            </requirements>
            -->
        </mojo>
        <mojo>
            <goal>runAll</goal>
            <description>Runs all the Lagom services</description>
            <implementation>com.lightbend.lagom.maven.RunAllMojo</implementation>
            <!-- <language/>
            <phase/>
            <executePhase/>
            <executeGoal/>
            <executeLifecycle/>
            <requiresDependencyResolution/>
            <requiresDependencyCollection/>
            -->
            <!-- It doesn't make sense to run runAll as part of the lifecycle, since it blocks -->
            <requiresDirectInvocation>true</requiresDirectInvocation>
            <!--
            <requiresProject/>
            <requiresReports/>
            <requiresOnline/>
            -->
            <!-- The documentation for this flag is confusing to say the least, if not outright wrong.
                Aggregator, if true, tells maven that this mojo aggregates the build, which results in maven
                not aggregating the build itself. -->
            <aggregator>true</aggregator>
            <!--
            <inheritedByDefault/>
            <threadSafe/>
            -->
            <!-- instantiationStrategy is a required element -->
            <instantiationStrategy>singleton</instantiationStrategy>
            <!--
            <executionStrategy/>
            <since/>
            <deprecated/>
            <configurator/>
            <composer/>
            -->
            <parameters>
                <parameter>
                    <name>servicePortRange</name>
                    <type>com.lightbend.lagom.maven.PortRangeBean</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>The range of ports this service should run on</description>
                </parameter>
            </parameters>
            <!--
            <configuration>
                <paramName implementation=.. default-value=.. />
            </configuration>

            <requirements>
                <requirement>
                    <role/>
                    <role-hint/>
                    <field-name/>
                </requirement>
            </requirements>
            -->
        </mojo>

        <mojo>
            <goal>startCassandra</goal>
            <description>Starts Cassandra</description>
            <implementation>com.lightbend.lagom.maven.StartCassandraMojo</implementation>
            <aggregator>true</aggregator>
            <instantiationStrategy>singleton</instantiationStrategy>
            <parameters>
                <parameter>
                    <name>cassandraMaxBootWaitingSeconds</name>
                    <type>int</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>The timeout to wait for Cassandra to start.</description>
                </parameter>
                <parameter>
                    <name>cassandraPort</name>
                    <type>int</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>The port to run Cassandra on.</description>
                </parameter>
                <parameter>
                    <name>cassandraEnabled</name>
                    <type>boolean</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>Whether Cassandra is enabled or not.</description>
                </parameter>
                <parameter>
                    <name>cassandraCleanOnStart</name>
                    <type>boolean</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>Whether the Cassandra database should be cleaned when it starts.</description>
                </parameter>
                <parameter>
                    <name>cassandraJvmOptions</name>
                    <type>java.util.List</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>The JVM options to pass to Cassandra.</description>
                </parameter>
                <parameter>
                    <name>servicePortRange</name>
                    <type>com.lightbend.lagom.maven.LagomPortRange</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>The port range for running services on</description>
                </parameter>
            </parameters>
            <configuration>
                <cassandraMaxBootWaitingSeconds implementation="int" default-value="20" />
                <cassandraPort implementation="int" default-value="4000" />
                <cassandraEnabled implementation="boolean" default-value="true" />
                <cassandraCleanOnStart implementation="boolean" default-value="true" />
            </configuration>
        </mojo>
        <mojo>
            <goal>stopCassandra</goal>
            <description>Stops Cassandra</description>
            <implementation>com.lightbend.lagom.maven.StopCassandraMojo</implementation>
            <aggregator>true</aggregator>
            <instantiationStrategy>singleton</instantiationStrategy>
            <parameters>
                <parameter>
                    <name>cassandraEnabled</name>
                    <type>boolean</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>Whether Cassandra is enabled or not.</description>
                </parameter>
            </parameters>
            <configuration>
                <cassandraEnabled implementation="boolean" default-value="true" />
            </configuration>
        </mojo>

        <mojo>
            <goal>startServiceLocator</goal>
            <description>Starts the service locator</description>
            <implementation>com.lightbend.lagom.maven.StartServiceLocatorMojo</implementation>
            <aggregator>true</aggregator>
            <instantiationStrategy>singleton</instantiationStrategy>
            <parameters>
                <parameter>
                    <name>serviceLocatorPort</name>
                    <type>int</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>The port to run the service locator on.</description>
                </parameter>
                <parameter>
                    <name>serviceGatewayPort</name>
                    <type>int</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>The port to run the service gateway on.</description>
                </parameter>
                <parameter>
                    <name>serviceLocatorEnabled</name>
                    <type>boolean</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>Whether the service locator is enabled or not.</description>
                </parameter>
                <parameter>
                    <name>unmanagedServices</name>
                    <type>java.util.Map</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>A map of service names to URLs for services not managed by Lagom.</description>
                </parameter>
            </parameters>
            <configuration>
                <serviceLocatorPort implementation="int" default-value="8000" />
                <serviceGatewayPort implementation="int" default-value="9000" />
                <serviceLocatorEnabled implementation="boolean" default-value="true" />
            </configuration>
        </mojo>
        <mojo>
            <goal>stopServiceLocator</goal>
            <description>Stops the service locator.</description>
            <implementation>com.lightbend.lagom.maven.StopServiceLocatorMojo</implementation>
            <aggregator>true</aggregator>
            <instantiationStrategy>singleton</instantiationStrategy>
            <parameters>
                <parameter>
                    <name>serviceLocatorEnabled</name>
                    <type>boolean</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>Whether the service locator is enabled or not.</description>
                </parameter>
            </parameters>
            <configuration>
                <serviceLocatorEnabled implementation="boolean" default-value="true" />
            </configuration>
        </mojo>

        <mojo>
            <goal>run</goal>
            <description>Runs a service in dev mode</description>
            <implementation>com.lightbend.lagom.maven.RunMojo</implementation>
            <aggregator>true</aggregator>
            <instantiationStrategy>singleton</instantiationStrategy>
            <parameters>
                <parameter>
                    <name>lagomService</name>
                    <type>boolean</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>Whether this project is a Lagom service or not</description>
                </parameter>
                <parameter>
                    <name>servicePort</name>
                    <type>int</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>The port this service should run on</description>
                </parameter>
                <parameter>
                    <name>servicePortRange</name>
                    <type>com.lightbend.lagom.maven.PortRangeBean</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>The range of ports this service should run on</description>
                </parameter>
                <parameter>
                    <name>serviceLocatorPort</name>
                    <type>int</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>The port to run the service locator on.</description>
                </parameter>
                <parameter>
                    <name>serviceLocatorEnabled</name>
                    <type>boolean</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>Whether the service locator is enabled or not.</description>
                </parameter>
                <parameter>
                    <name>serviceLocatorUrl</name>
                    <type>boolean</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>The service locator URL.</description>
                </parameter>
                <parameter>
                    <name>cassandraEnabled</name>
                    <type>boolean</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>Whether Cassandra is enabled or not.</description>
                </parameter>
                <parameter>
                    <name>cassandraPort</name>
                    <type>int</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>The port to run Cassandra on.</description>
                </parameter>
                <parameter>
                    <name>cassandraKeyspace</name>
                    <type>java.lang.String</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>The keyspace to use for Cassandra.</description>
                </parameter>
            </parameters>
            <configuration>
                <lagomService implementation="boolean" default-value="false" />
                <servicePort implementation="int" default-value="-1" />
                <serviceLocatorPort implementation="int" default-value="8000" />
                <serviceLocatorEnabled implementation="boolean" default-value="true" />
                <!-- No default for service locator URL because as far as I can work out, maven doesn't let you
                    depend on other configuration values for defaults, only system properties or built in configuration,
                    so we'll use null to detect when it should be the default, and calculate the default value
                    accordingly. -->
                <cassandraEnabled implementation="boolean" default-value="true"/>
                <cassandraPort implementation="int" default-value="4000" />
            </configuration>
        </mojo>

        <mojo>
            <goal>stop</goal>
            <description>Stops a service dev mode</description>
            <implementation>com.lightbend.lagom.maven.StopMojo</implementation>
            <aggregator>true</aggregator>
            <instantiationStrategy>singleton</instantiationStrategy>
            <parameters>
                <parameter>
                    <name>lagomService</name>
                    <type>boolean</type>
                    <required>false</required>
                    <editable>true</editable>
                    <description>Whether this project is a Lagom service or not</description>
                </parameter>
            </parameters>
            <configuration>
                <lagomService implementation="boolean" default-value="false" />
            </configuration>
        </mojo>

    </mojos>

    <dependencies>
        <dependency>
            <groupId>com.lightbend.lagom</groupId>
            <artifactId>lagom-build-tool-support</artifactId>
            <version>1.1.0-SNAPSHOT</version>
        </dependency>
    </dependencies>
</plugin>