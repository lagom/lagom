#!/usr/bin/env bash

# Copyright (C) 2009-2019 Lightbend Inc. <https://www.lightbend.com>

# shellcheck source=bin/scriptLib
. "$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )/scriptLib"

runSbt unidoc

declare -a EXTRA_TASKS
if [ "$TRAVIS_EVENT_TYPE" = "cron" ]; then
    EXTRA_TASKS+=("markdownValidateExternalLinks")
fi

cd docs
runSbt markdownValidateDocs markdownEvaluateSbtFiles \
  headerCheck test:headerCheck \
  scalafmtCheckAll scalafmtSbtCheck \
  javafmtCheckAll \
  test "${EXTRA_TASKS[@]}"
